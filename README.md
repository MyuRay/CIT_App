# CIT App - 千葉工業大学学生支援アプリ

千葉工業大学の学生向けに開発された包括的な学生支援アプリケーションです。時間割管理、掲示板機能、食堂メニュー表示、シラバス検索など、学生生活に必要な機能を一つのアプリで提供します。

## 📱 主な機能

### 🗓️ 時間割管理
- 個人の時間割作成・編集
- ホーム画面ウィジェット今後対応（次の授業、今日の予定、週間予定）

### 📢 掲示板システム
- カテゴリ別投稿（イベント、サークル、学習、その他）
- 画像投稿対応
- ピン留め・人気投稿表示
- コメント機能
- 管理者による投稿管理

### 🍽️ 食堂メニュー
- リアルタイムメニュー表示
- 画像付きメニュー情報
- 自動更新スケジューラー追加済み

### 📚 シラバス検索今後追加
- 講義情報検索
- ブックマーク機能

### 👤 ユーザー管理
- CITメールアドレス認証（@s.chibakoudai.jp, @p.chibakoudai.jp）
- 管理者権限システム
- お問い合わせ機能

## 🏗️ 技術スタック

- **フレームワーク**: Flutter 3.38.3 (stable)
- **状態管理**: Riverpod + Hooks Riverpod
- **バックエンド**: Firebase
  - Authentication（認証）
  - Firestore（データベース）
  - Storage（画像ストレージ）
  - App Check（セキュリティ）
  - Cloud Messaging（プッシュ通知）
  - Analytics（分析）
- **ナビゲーション**: Go Router
- **UI**: Material Design 3
- **プラットフォーム**: Android, iOS, Web

## 🚀 セットアップと起動

### 前提条件
- Flutter SDK 3.38.3 (stable)
- Dart SDK 3.7.0以降
- Android Studio / Xcode（モバイル開発時）
- Firebase プロジェクト

### インストール手順

1. **リポジトリのクローン**
```bash
git clone [repository-url]
cd cit_app
```

2. **依存関係のインストール**
```bash
flutter pub get
```

3. **Firebase設定**
   - Firebase Console でプロジェクトを作成
   - Android: `android/app/google-services.json` を配置
   - iOS: `ios/Runner/GoogleService-Info.plist` を配置
   - Web: `web/firebase-config.js` の設定値を更新

4. **コード生成**
```bash
flutter packages pub run build_runner build
```

5. **アプリケーションの起動**
```bash
flutter run
```

## 📁 プロジェクト構造

```
lib/
├── core/                     # コア機能
│   ├── config/              # アプリ設定
│   ├── constants/           # 定数定義
│   ├── providers/           # Riverpod プロバイダー
│   └── theme/               # テーマ設定
├── models/                  # データモデル
├── screens/                 # 画面コンポーネント
│   ├── auth/               # 認証画面
│   ├── home/               # ホーム画面
│   ├── schedule/           # 時間割画面
│   ├── bulletin/           # 掲示板画面
│   └── profile/            # プロフィール画面
├── services/                # ビジネスロジック
├── widgets/                 # 再利用可能ウィジェット
└── utils/                   # ユーティリティ
```

## 🔧 開発ガイド

### 認証システム
- CITのメールアドレス（@s.chibakoudai.jp または @p.chibakoudai.jp）のみ登録可能
- Firebase Authentication を使用

### 状態管理
- Riverpod を使用したリアクティブな状態管理
- プロバイダーは `core/providers/` に配置

### データモデル
- Freezed を使用したイミュータブルなデータクラス
- JSON シリアライゼーション対応

### テーマ
- Material Design 3 準拠
- ライト・ダークテーマ対応

## 🧪 テスト

```bash
# 単体テスト
flutter test

# 統合テスト
flutter test integration_test/
```

## 📦 ビルド

### Android
```bash
flutter build apk --release
flutter build appbundle --release
```

### iOS
```bash
flutter build ios --release
```

### Web
```bash
flutter build web --release
```

## 🛠️ トラブルシューティング

### よくある問題

1. **Firebase接続エラー**
   - `google-services.json` の配置を確認
   - Firebase プロジェクトの設定を確認

2. **ビルドエラー**
   - `flutter clean && flutter pub get` を実行
   - 依存関係の競合を確認

3. **ウィジェット表示されない**
   - Android の権限設定を確認
   - ホーム画面ウィジェットの初期化状態を確認

## 📋 変更ログ

### v1.17.10+60
#### 🍽️ 学食レビュー機能の改善
- **メニュー名の2行表示対応**
  - レビューカード、レビューリスト、詳細画面のメニュー名を2行表示に対応
  - 長いメニュー名も見やすく表示
- **ドラッグ可能なボタン**
  - レビュー作成・編集ボタンをドラッグで移動可能に
  - 右下固定で、文字数に応じて左上方向に拡大
  - 全角20文字（メニュー詳細画面）または25文字（レビュー作成フォーム）で折り返し
- **UI改善**
  - ボタンの幅を調整し、文字が全部見えるように改善

#### 🔒 セキュリティ・プライバシー
- **プライバシーポリシー・利用規約の改訂**
  - 最新の内容に更新
- **アカウント登録画面の改善**
  - パスワード設定フォームの下に、MARINEアカウント及び大学関連サービスとは違うパスワードを使うことを推奨するメッセージを追加

### v1.4.0+11
#### 🚀 新機能
- **掲示板投稿申請システムを実装**
  - すべての投稿が管理者による事前承認制に変更
  - 投稿フォームを「投稿申請」に変更
  - 管理者画面に承認待ち・承認済みタブを追加

#### 🔒 セキュリティ向上
- **Android権限の最適化**
  - 危険な`MANAGE_EXTERNAL_STORAGE`権限を削除
  - 必要最小限の権限のみに変更（カメラ、画像アクセス）
  - Google Play Store承認要件に準拠

#### 🛠️ 管理機能強化
- 管理者による投稿承認・却下機能
- ピン留め申請システムの完全実装
- 掲示板管理ボタンの「開発中」表示を修正

### v1.3.1+10
#### 🐛 バグ修正
- ホーム画面の右上ウィジェット更新ボタン（デバッグ用）を削除
- ダークモードでのテキストと UI 要素の視認性を改善
- ダークモードでのオーバーフロー警告（黄色い線）を修正

#### 🎨 UI改善
- 通知バッジ色をテーマ適応型に変更
- 授業スケジュール表示のレイアウト最適化
- 便利リンクカードの色指定をテーマ対応に改良

### v1.3.0+9
- 時間割管理機能の安定性向上
- 掲示板システムの機能拡張
- ホームウィジェット機能の実装

## 📄 ライセンス

このプロジェクトは千葉工業大学の学生支援を目的として開発されています。

## 👥 コントリビューション

バグ報告や機能提案は、アプリ内のお問い合わせ機能からご連絡ください。

## 📞 サポート

技術的な問題やご質問がございましたら、アプリ内のお問い合わせフォームをご利用ください。
